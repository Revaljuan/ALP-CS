{% extends 'base.html' %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-4">
    <h3 class="mb-3">Login</h3>
    <form id="loginForm">
      <div class="mb-3">
        <input type="text" class="form-control" id="username" placeholder="Username" required>
      </div>
      <div class="mb-3">
        <input type="password" class="form-control" id="password" placeholder="Password" required>
      </div>
      <button type="submit" class="btn btn-primary w-100">Login</button>
    </form>
    <hr>
    <a href="{{ url_for('google.login_google') }}" class="btn btn-danger w-100">Login with Google</a>
  </div>
</div>
<script>
document.getElementById('loginForm').addEventListener('submit', async e => {
    e.preventDefault();
    const res = await fetch('/api/login', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({
            username: document.getElementById('username').value,
            password: document.getElementById('password').value
        })
    });
    const data = await res.json();
    if(res.ok) alert('Login berhasil: ' + JSON.stringify(data));
    else alert('Error: ' + data.msg);
});
</script>
{% endblock %}
